import{S as L,T as M}from"./SearchForm-CSBbbiMC.js";import{W}from"./WForm-DIasoZiv.js";import{_ as V,b as l,u as R,o as m,T as H,w as i,f as K,c as n,h as b,g as u,a0 as q,j as v,k as D,B as T,d as O,V as U,e as k,Z as B,U as E}from"./index-C75yrSxv.js";import{_ as $}from"./index-CrwAtV-J.js";import{u as G,_ as J}from"./index.es--CQYwhSW.js";import"./index-BUFb_l2c.js";import"./Col-DTkjBlJL.js";import"./debounce-CN_rIKSS.js";import"./index-C_MRxJ4F.js";import"./List-bYv9SaMX.js";import"./index-lYwMDmlm.js";import"./index-BujYrMaM.js";import"./index-CeCNycme.js";const j={class:"footer"},P={__name:"Edit",emits:["success"],setup(z,{expose:h,emit:y}){const r=l({}),o=l(!1),d=l(""),x=y,c=l(!1),{SEND_MESSAGE:w}=R(),S=async()=>{if(!await d.value.validate())return;const t={type:"setAiBoxNetwork",...r.value};v.on(t.type,e=>{e.result===0?(D.success("操作成功"),o.value=!1,x("success")):D.error("请求失败"),c.value=!1,v.off(t.type)}),c.value=!0,w(t)},_=p=>{r.value=JSON.parse(JSON.stringify(p)),o.value=!0,c.value=!1},f=()=>{o.value=!1},C=[{type:"input",label:"网络名称",key:"name"},{type:"select",label:"分配方式",key:"dhcp",list:[{value:0,label:"手动配置"},{value:1,label:"自动配置"}]},{type:"input",label:"网络地址",key:"address"},{type:"input",label:"子网掩码",key:"mask"},{type:"input",label:"网关地址",key:"gateway"},{type:"input",label:"DNS",key:"dns"}],N={name:[{required:!0,message:"请输入",trigger:"blur"}],address:[{required:!0,message:"请输入",trigger:"blur"}],dhcp:[{required:!0,message:"请输入",trigger:"blur"}],mask:[{required:!0,message:"请输入",trigger:"blur"}],gateway:[{required:!0,message:"请输入",trigger:"blur"}],dns:[{required:!0,message:"请输入",trigger:"blur"}]};return h({showDrawer:_}),(p,t)=>{const e=T,a=$;return m(),H(a,{open:u(o),"onUpdate:open":t[1]||(t[1]=s=>q(o)?o.value=s:null),title:"编辑",width:"520","footer-style":{textAlign:"right"},onClose:f},{footer:i(()=>[K("div",j,[n(e,{type:"primary",onClick:S},{default:i(()=>t[2]||(t[2]=[b("确认")])),_:1}),n(e,{class:"close",onClick:f},{default:i(()=>t[3]||(t[3]=[b("取消")])),_:1})])]),default:i(()=>[n(W,{ref_key:"wFormRef",ref:d,modelValue:u(r),"onUpdate:modelValue":t[0]||(t[0]=s=>q(r)?r.value=s:null),formList:C,rules:N,labelWidth:"100px"},null,8,["modelValue"])]),_:1},8,["open"])}}},Z=V(P,[["__scopeId","data-v-5542f433"]]),Q={class:"networkConfig-container"},X={key:0},Y={key:1},ee={key:2},te={__name:"index",setup(z){const{SEND_MESSAGE:h}=R(),y=l([]),r=l(0),o=O(()=>({total:r.value,current:w.value,pageSize:S.value})),d=()=>{const e={type:"getAiBoxNetwork"};v.on(e.type,a=>{a.result===0?y.value=a.data.Interfaces:D.error("请求失败"),v.off(e.type)}),h(e)},{run:x,loading:c,current:w,pageSize:S}=G(d,{formatResult:e=>e.data.results,pagination:{currentKey:"page",pageSizeKey:"results"}}),_=l(""),f=e=>{_.value.showDrawer(e)},C=(e,a,s)=>{console.log("🚀 ~ handleTableChange ~ pag, filters, sorter:",e,a,s),x({results:e.pageSize,page:e==null?void 0:e.current,sortField:s.field,sortOrder:s.order,...a})},N=[{type:"input",key:"keyWord",label:"网络名称"},{type:"select",key:"screenKey",label:"连接状态",list:[{value:"name",label:"已连接"},{value:"description",label:"未连接"},{value:"description",label:"运行中"}]}],p=[{title:"网络名称",dataIndex:"name",key:"name"},{title:"网络地址",dataIndex:"address",key:"address"},{title:"子网掩码",dataIndex:"mask",key:"mask"},{title:"网关地址",dataIndex:"gateway",key:"gateway"},{title:"物理地址",dataIndex:"mac",key:"mac"},{title:"分配方式",dataIndex:"dhcp",key:"dhcp",width:180},{title:"DNS",dataIndex:"dns",key:"dns"},{title:"连接状态",key:"status",dataIndex:"status"},{title:"操作",key:"action"}],t=l({x:"100%",y:document.body.clientHeight-380});return U(()=>{window.onresize=()=>(()=>{t.value.y=document.body.clientHeight-380})()}),(e,a)=>{const s=M,A=T,F=J;return m(),k("div",Q,[n(L,{searchList:N}),n(F,{columns:p,"data-source":u(y),pagination:u(o),loading:u(c),onChange:C,scroll:u(t)},{bodyCell:i(({column:I,record:g})=>[I.key==="status"?(m(),k("span",X,[n(s,{color:g.status?"volcano":"green"},{default:i(()=>[b(B(g.status?"异常":"正常"),1)]),_:2},1032,["color"])])):E("",!0),I.key==="dhcp"?(m(),k("span",Y,B(g.dhcp?"自动":"手动"),1)):E("",!0),I.key==="action"?(m(),k("span",ee,[n(A,{type:"link",onClick:ae=>f(g)},{default:i(()=>a[0]||(a[0]=[b("编辑")])),_:2},1032,["onClick"])])):E("",!0)]),_:1},8,["data-source","pagination","loading","scroll"]),n(Z,{ref_key:"editRef",ref:_,onSuccess:d},null,512)])}}},fe=V(te,[["__scopeId","data-v-1a6d9530"]]);export{fe as default};

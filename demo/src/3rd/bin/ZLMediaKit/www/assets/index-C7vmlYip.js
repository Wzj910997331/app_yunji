import{S as O,T as U}from"./SearchForm-BKyQ_HQc.js";import{W}from"./WForm-N4Mosagg.js";import{_ as A,b as s,u as F,o as _,T as $,w as u,f as G,c as l,h as x,g as c,a0 as R,j as S,k as V,B as L,d as J,V as K,e as h,Z as z,U as T}from"./index-0WvK6C2i.js";import{_ as j}from"./index-BacwxZLG.js";import{u as P,_ as Z}from"./index.es-CdcllolZ.js";import"./index-usPi87uD.js";import"./Col-QspOhJ19.js";import"./debounce-cOzjl19W.js";import"./index-sQ36ty4v.js";import"./List-CzR7Ze3u.js";import"./index-CDWfSvXp.js";import"./index-CqLsB6dj.js";import"./index-CQYqznZm.js";const Q={class:"footer"},X={__name:"Edit",emits:["success"],setup(M,{expose:w,emit:p}){const n=s({}),o=s(!1),f=s(""),C=p,m=s(!1),{SEND_MESSAGE:N}=F(),g=async()=>{if(!await f.value.validate())return;const t={type:"setAiBoxNetwork",...n.value};S.on(t.type,i=>{i.result===0?(V.success("操作成功"),o.value=!1,C("success")):V.error("请求失败"),m.value=!1,S.off(t.type)}),m.value=!0,N(t)},I=y=>{n.value=JSON.parse(JSON.stringify(y)),o.value=!0,m.value=!1},k=()=>{o.value=!1},D=[{type:"input",label:"网络名称",key:"name"},{type:"select",label:"分配方式",key:"dhcp",list:[{value:0,label:"手动配置"},{value:1,label:"自动配置"}]},{type:"input",label:"网络地址",key:"address"},{type:"input",label:"子网掩码",key:"mask"},{type:"input",label:"网关地址",key:"gateway"},{type:"input",label:"DNS",key:"dns"}],v={name:[{required:!0,message:"请输入",trigger:"blur"}],address:[{required:!0,message:"请输入",trigger:"blur"}],dhcp:[{required:!0,message:"请输入",trigger:"blur"}],mask:[{required:!0,message:"请输入",trigger:"blur"}],gateway:[{required:!0,message:"请输入",trigger:"blur"}],dns:[{required:!0,message:"请输入",trigger:"blur"}]};return w({showDrawer:I}),(y,t)=>{const i=L,E=j;return _(),$(E,{open:c(o),"onUpdate:open":t[1]||(t[1]=d=>R(o)?o.value=d:null),title:"编辑",width:"520","footer-style":{textAlign:"right"},onClose:k},{footer:u(()=>[G("div",Q,[l(i,{type:"primary",onClick:g},{default:u(()=>t[2]||(t[2]=[x("确认")])),_:1}),l(i,{class:"close",onClick:k},{default:u(()=>t[3]||(t[3]=[x("取消")])),_:1})])]),default:u(()=>[l(W,{ref_key:"wFormRef",ref:f,modelValue:c(n),"onUpdate:modelValue":t[0]||(t[0]=d=>R(n)?n.value=d:null),formList:D,rules:v,labelWidth:"100px"},null,8,["modelValue"])]),_:1},8,["open"])}}},Y=A(X,[["__scopeId","data-v-5542f433"]]),ee={class:"networkConfig-container"},te={key:0},ae={key:1},se={key:2},ne={__name:"index",setup(M){const{SEND_MESSAGE:w}=F(),p=s([]),n=s([]),o=s({}),f=s(0),C=J(()=>({total:f.value,current:k.value,pageSize:D.value})),m=s(!1),N=e=>{o.value=e,n.value=p.value.filter(a=>{const r=e.name?a.name.includes(e.name):!0,q=e.status!==void 0?a.status===Number(e.status):!0;return r&&q})},g=()=>{const e={type:"getAiBoxNetwork"};S.on(e.type,a=>{a.result===0?(p.value=a.data.Interfaces,n.value=[...p.value]):V.error("请求失败"),S.off(e.type)}),w(e)},{run:I,current:k,pageSize:D}=P(g,{formatResult:e=>e.data.results,pagination:{currentKey:"page",pageSizeKey:"results"}}),v=s(""),y=e=>{v.value.showDrawer(e)},t=(e,a,r)=>{console.log("🚀 ~ handleTableChange ~ pag, filters, sorter:",e,a,r),I({results:e.pageSize,page:e==null?void 0:e.current,sortField:r.field,sortOrder:r.order,...a})},i=[{type:"input",key:"name",label:"网络名称"},{type:"select",key:"status",label:"连接状态",list:[{value:"0",label:"正常"},{value:"1",label:"异常"}]}],E=[{title:"网络名称",dataIndex:"name",key:"name"},{title:"网络地址",dataIndex:"address",key:"address"},{title:"子网掩码",dataIndex:"mask",key:"mask"},{title:"网关地址",dataIndex:"gateway",key:"gateway"},{title:"物理地址",dataIndex:"mac",key:"mac"},{title:"分配方式",dataIndex:"dhcp",key:"dhcp",width:180},{title:"DNS",dataIndex:"dns",key:"dns"},{title:"连接状态",key:"status",dataIndex:"status"},{title:"操作",key:"action"}],d=s({x:"100%",y:document.body.clientHeight-380});return K(()=>{window.onresize=()=>(()=>{d.value.y=document.body.clientHeight-380})()}),(e,a)=>{const r=U,q=L,H=Z;return _(),h("div",ee,[l(O,{searchList:i,data:{name:"",status:null},onChange:N}),l(H,{columns:E,"data-source":c(n),pagination:c(C),loading:c(m),onChange:t,scroll:c(d)},{bodyCell:u(({column:B,record:b})=>[B.key==="status"?(_(),h("span",te,[l(r,{color:b.status?"volcano":"green"},{default:u(()=>[x(z(b.status?"异常":"正常"),1)]),_:2},1032,["color"])])):T("",!0),B.key==="dhcp"?(_(),h("span",ae,z(b.dhcp?"自动":"手动"),1)):T("",!0),B.key==="action"?(_(),h("span",se,[l(q,{type:"link",onClick:oe=>y(b)},{default:u(()=>a[0]||(a[0]=[x("编辑")])),_:2},1032,["onClick"])])):T("",!0)]),_:1},8,["data-source","pagination","loading","scroll"]),l(Y,{ref_key:"editRef",ref:v,onSuccess:g},null,512)])}}},ve=A(ne,[["__scopeId","data-v-1f6abaa1"]]);export{ve as default};

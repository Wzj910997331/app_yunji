import{S as T,T as $}from"./SearchForm-e2-WG26U.js";import{W as z}from"./WForm-BVLrz74G.js";import{_ as V,a as r,u as q,o as f,U as L,w as l,e as W,c as s,g,f as p,a1 as D,i as k,j as E,B as R,b as K,d as h,$ as M,V as B}from"./index-BljiQnb9.js";import{_ as O}from"./index-ClhLyJYx.js";import{u as U,_ as G}from"./index.es-Bwtx25l8.js";import"./index-DyVB3jGm.js";import"./Col-BY5-xkNW.js";import"./index-DKTab8fQ.js";import"./index-bTMCMZ_T.js";const J={class:"footer"},j={__name:"Edit",emits:["success"],setup(A,{expose:v,emit:m}){const o=r({}),a=r(!1),i=r(""),b=m,u=r(!1),{SEND_MESSAGE:x}=q(),S=async()=>{if(!await i.value.validate())return;const e={type:"setAiBoxNetwork",...o.value};k.on(e.type,t=>{t.result===0?(E.success("操作成功"),a.value=!1,b("success")):E.error("请求失败"),u.value=!1,k.off(e.type)}),u.value=!0,x(e)},_=d=>{o.value=JSON.parse(JSON.stringify(d)),a.value=!0,u.value=!1},y=()=>{a.value=!1},w=[{type:"input",label:"网络名称",key:"name"},{type:"input",label:"网络地址",key:"address"},{type:"input",label:"子网掩码",key:"mask"},{type:"input",label:"网关地址",key:"gateway"},{type:"input",label:"DNS",key:"dns"}],C={name:[{required:!0,message:"请输入",trigger:"blur"}],address:[{required:!0,message:"请输入",trigger:"blur"}],mask:[{required:!0,message:"请输入",trigger:"blur"}],gateway:[{required:!0,message:"请输入",trigger:"blur"}],dns:[{required:!0,message:"请输入",trigger:"blur"}]};return v({showDrawer:_}),(d,e)=>{const t=R,n=O;return f(),L(n,{open:p(a),"onUpdate:open":e[1]||(e[1]=c=>D(a)?a.value=c:null),title:"编辑",width:"520","footer-style":{textAlign:"right"},onClose:y},{footer:l(()=>[W("div",J,[s(t,{type:"primary",onClick:S},{default:l(()=>e[2]||(e[2]=[g("确认")])),_:1}),s(t,{class:"close",onClick:y},{default:l(()=>e[3]||(e[3]=[g("取消")])),_:1})])]),default:l(()=>[s(z,{ref_key:"wFormRef",ref:i,modelValue:p(o),"onUpdate:modelValue":e[0]||(e[0]=c=>D(o)?o.value=c:null),formList:w,rules:C,labelWidth:"100px"},null,8,["modelValue"])]),_:1},8,["open"])}}},P=V(j,[["__scopeId","data-v-b60d4612"]]),H={class:"networkConfig-container"},Q={key:0},X={key:1},Y={__name:"index",setup(A){const{SEND_MESSAGE:v}=q(),m=r([]),o=r(0),a=K(()=>({total:o.value,current:x.value,pageSize:S.value})),i=()=>{const e={type:"getAiBoxNetwork"};k.on(e.type,t=>{t.result===0?m.value=t.data.Interfaces:E.error("请求失败"),k.off(e.type)}),v(e)},{run:b,loading:u,current:x,pageSize:S}=U(i,{formatResult:e=>e.data.results,pagination:{currentKey:"page",pageSizeKey:"results"}}),_=r(""),y=e=>{_.value.showDrawer(e)},w=(e,t,n)=>{console.log("🚀 ~ handleTableChange ~ pag, filters, sorter:",e,t,n),b({results:e.pageSize,page:e==null?void 0:e.current,sortField:n.field,sortOrder:n.order,...t})},C=[{type:"input",key:"keyWord",label:"网络名称"},{type:"select",key:"screenKey",label:"连接状态",list:[{value:"name",label:"已连接"},{value:"description",label:"未连接"},{value:"description",label:"运行中"}]}],d=[{title:"网络名称",dataIndex:"name",key:"name"},{title:"网络地址",dataIndex:"address",key:"address"},{title:"子网掩码",dataIndex:"mask",key:"mask"},{title:"网关地址",dataIndex:"gateway",key:"gateway"},{title:"物理地址",dataIndex:"mac",key:"mac"},{title:"DNS",dataIndex:"dns",key:"dns"},{title:"连接状态",key:"status",dataIndex:"status"},{title:"操作",key:"action"}];return(e,t)=>{const n=$,c=R,F=G;return f(),h("div",H,[s(T,{searchList:C}),s(F,{columns:d,"data-source":p(m),pagination:p(a),loading:p(u),onChange:w,scroll:{x:!0,y:460}},{bodyCell:l(({column:I,record:N})=>[I.key==="status"?(f(),h("span",Q,[s(n,{color:N.status?"volcano":"green"},{default:l(()=>[g(M(N.status?"异常":"正常"),1)]),_:2},1032,["color"])])):B("",!0),I.key==="action"?(f(),h("span",X,[s(c,{type:"link",onClick:Z=>y(N)},{default:l(()=>t[0]||(t[0]=[g("编辑")])),_:2},1032,["onClick"])])):B("",!0)]),_:1},8,["data-source","pagination","loading"]),s(P,{ref_key:"editRef",ref:_,onSuccess:i},null,512)])}}},ue=V(Y,[["__scopeId","data-v-7e6abc1c"]]);export{ue as default};

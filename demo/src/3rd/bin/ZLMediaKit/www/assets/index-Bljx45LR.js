import{S as W}from"./SearchForm-CSBbbiMC.js";import{_ as F}from"./Title-C5dW_jr-.js";import{W as I}from"./WForm-DIasoZiv.js";import{_ as z,b as p,r as j,o as D,T as N,w as n,f as t,c as l,h as u,g as a,a0 as b,B as T,u as q,av as J,d as K,e as E,F as G,W as Z,Z as g,j as w,k as S,aq as H,ap as O}from"./index-C75yrSxv.js";import{_ as Q}from"./index-CrwAtV-J.js";import{_ as X}from"./index-CeCNycme.js";import{a as Y,_ as ee}from"./index-lYwMDmlm.js";import"./index-BUFb_l2c.js";import"./Col-DTkjBlJL.js";import"./debounce-CN_rIKSS.js";import"./index-C_MRxJ4F.js";import"./List-bYv9SaMX.js";const te=["src"],se=["src"],oe={class:"footer"},le={__name:"Detail",setup($,{expose:k}){const i=p({}),_=p(!1);p("警告原图"),p(!1);const C=f=>{i.value=f,_.value=!0},r=()=>{_.value=!1},m=[{type:"text",label:"告警类别",key:"alarmType"},{type:"text",label:"告警标识",key:"alarmId"},{type:"text",label:"视频通道",key:"mediaName"},{type:"text",label:"上报情况",key:"pushStatus"},{type:"slot",label:"抓拍图",key:"Path"}];return j(["警告原图","前端标注图",{value:"后端标注图",disabled:!0}]),k({showDrawer:C}),(f,c)=>{const x=F,h=T,L=Q;return D(),N(L,{open:a(_),"onUpdate:open":c[1]||(c[1]=y=>b(_)?_.value=y:null),title:"告警详情",width:"48%","footer-style":{textAlign:"right"},onClose:r},{footer:n(()=>[t("div",oe,[l(h,{class:"close",onClick:r},{default:n(()=>c[2]||(c[2]=[u("取消")])),_:1})])]),default:n(()=>[l(x,{title:"告警明细",class:"detail-info-title"}),l(I,{modelValue:a(i),"onUpdate:modelValue":c[0]||(c[0]=y=>b(i)?i.value=y:null),formList:m,labelWidth:"100px"},{Path:n(()=>[t("img",{src:a(i).Path,style:{width:"200px"}},null,8,te)]),_:1},8,["modelValue"]),l(x,{title:"告警预览",class:"detail-info-title title"}),t("img",{src:a(i).Path,style:{width:"100%"}},null,8,se)]),_:1},8,["open"])}}},ne=z(le,[["__scopeId","data-v-7158977c"]]),ae={class:"alarm-container"},ie={class:"alarm-box"},re={class:"flex"},ce=["src"],de={class:"item-label"},ue={class:"item"},pe={class:"content"},_e={class:"item"},me={class:"content"},fe={class:"item"},ve={class:"content"},ye={class:"item"},ge={class:"item-alarm"},be={class:"content"},ke={class:"footer"},xe={class:"footer-delete"},he={class:"select-text"},we={__name:"index",setup($){const{SEND_MESSAGE:k}=q(),{alarmData:i,DELETE_ALARM:_,DELETE_ALL_ALARM:C}=J(),r=p([]),m=p(10),f=p(1),c=K(()=>{const o=(f.value-1)*m.value,e=o+m.value;return i.slice(o,e)}),x=(o,e)=>{console.log(o,e)},h=p(""),L=o=>{h.value.showDrawer(o)},y=o=>{const e=o.map(v=>v.jpgPath),A=o.map(v=>v.id),d={type:"clearJpgFiles",fileUrls:e};w.on(d.type,v=>{v.result===0?(S.success("操作成功"),_(A)):S.error("请求失败"),w.off(d.type)}),k(d)},B=()=>{const o={type:"clearAllJpg"};w.on(o.type,e=>{e.result===0?(S.success("操作成功"),C()):S.error("请求失败"),w.off(o.type)}),k(o)},M=[{type:"select",key:"keyWord",label:"警告任务",list:[{value:"name",label:"分组名称"},{value:"description",label:"描述"}]},{type:"select",key:"screenKey",label:"视频通道",list:[{value:"name",label:"分组名称"},{value:"description",label:"描述"}]},{type:"range",key:"keyWord",label:"警告时间"},{type:"select",key:"screenKey",label:"警告内容",list:[{value:"name",label:"分组名称"},{value:"description",label:"描述"}]}];return(o,e)=>{const A=O,d=T,v=ee,P=Y,R=H,U=X;return D(),E("div",ae,[l(W,{searchList:M,isRow:!0,span:5}),l(R,{value:a(r),"onUpdate:value":e[0]||(e[0]=s=>b(r)?r.value=s:null),style:{width:"100%"}},{default:n(()=>[l(P,{gutter:16,style:{width:"100%"}},{default:n(()=>[(D(!0),E(G,null,Z(a(c),s=>(D(),N(v,{class:"gutter-row",xs:24,sm:12,md:8,lg:6,key:s.id},{default:n(()=>[t("div",ie,[t("div",re,[l(A,{value:s,class:"flex1"},{default:n(()=>[u(" 告警任务: "+g(s.taskName),1)]),_:2},1032,["value"]),l(d,{type:"link",text:"",onClick:V=>L(s)},{default:n(()=>e[4]||(e[4]=[u(" 详情 ")])),_:2},1032,["onClick"])]),t("img",{class:"icon",src:s.Path},null,8,ce),t("div",de,[t("div",ue,[e[5]||(e[5]=t("div",null,"视频通道：",-1)),t("div",pe,g(s.mediaName),1)]),t("div",_e,[e[6]||(e[6]=t("div",null,"告警时间：",-1)),t("div",me,g(s.Time),1)]),t("div",fe,[e[7]||(e[7]=t("div",null,"上报状态：",-1)),t("div",ve,g(s.pushStatus),1)]),t("div",ye,[e[9]||(e[9]=t("div",null,"告警内容：",-1)),t("div",ge,[t("div",be,g(s.alarmMsg),1),l(d,{danger:"",class:"delete",onClick:V=>y([s])},{default:n(()=>e[8]||(e[8]=[u(" 删除 ")])),_:2},1032,["onClick"])])])])])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"]),t("div",ke,[t("div",xe,[t("span",null,[e[10]||(e[10]=u("已选 ")),t("span",he,g(a(r).length),1),e[11]||(e[11]=u("项"))]),l(d,{type:"primary",class:"footer-btn left",onClick:e[1]||(e[1]=s=>y(a(r)))},{default:n(()=>e[12]||(e[12]=[u(" 删除选中 ")])),_:1}),l(d,{class:"close footer-btn",onClick:B},{default:n(()=>e[13]||(e[13]=[u(" 清空全部 ")])),_:1})]),l(U,{current:a(f),"onUpdate:current":e[2]||(e[2]=s=>b(f)?f.value=s:null),pageSize:a(m),"onUpdate:pageSize":e[3]||(e[3]=s=>b(m)?m.value=s:null),"show-size-changer":"",total:a(i).length,onShowSizeChange:x},null,8,["current","pageSize","total"])]),l(ne,{ref_key:"detailRef",ref:h},null,512)])}}},Pe=z(we,[["__scopeId","data-v-37c6b48f"]]);export{Pe as default};

import{a4 as T,D as M,z as q,V as Y,a5 as Z,c as d,H as x,a6 as w,B as H,a7 as D,t as ee,a8 as ne,q as p,a9 as te,b as oe,aa as ae,G as le,A as se,d as F,ab as ie,ac as re,ad as ce,ae as ue,af as fe,ag as de,ah as pe,ai as ve,aj as P,ak as me,al as ge,am as Ce,an as ye}from"./index-BlIwGkDV.js";import{u as Pe}from"./index-DYyLVBxh.js";const xe=()=>{const e=T(!1);return M(()=>{e.value=!0}),e},be={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:D(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function V(e){return!!(e&&e.then)}const he=q({compatConfig:{MODE:3},name:"ActionButton",props:be,setup(e,i){let{slots:o}=i;const t=T(!1),r=T(),m=T(!1);let f;const u=xe();Y(()=>{e.autofocus&&(f=setTimeout(()=>{var l,s;return(s=(l=Z(r.value))===null||l===void 0?void 0:l.focus)===null||s===void 0?void 0:s.call(l)}))}),M(()=>{clearTimeout(f)});const g=function(){for(var l,s=arguments.length,c=new Array(s),y=0;y<s;y++)c[y]=arguments[y];(l=e.close)===null||l===void 0||l.call(e,...c)},C=l=>{V(l)&&(m.value=!0,l.then(function(){u.value||(m.value=!1),g(...arguments),t.value=!1},s=>(u.value||(m.value=!1),t.value=!1,Promise.reject(s))))},B=l=>{const{actionFn:s}=e;if(t.value)return;if(t.value=!0,!s){g();return}let c;if(e.emitEvent){if(c=s(l),e.quitOnNullishReturnValue&&!V(c)){t.value=!1,g(l);return}}else if(s.length)c=s(e.close),t.value=!1;else if(c=s(),!c){g();return}C(c)};return()=>{const{type:l,prefixCls:s,buttonProps:c}=e;return d(H,x(x(x({},w(l)),{},{onClick:B,loading:m.value,prefixCls:s},c),{},{ref:r}),o)}}}),Oe=e=>{const{componentCls:i,iconCls:o,zIndexPopup:t,colorText:r,colorWarning:m,marginXS:f,fontSize:u,fontWeightStrong:g,lineHeight:C}=e;return{[i]:{zIndex:t,[`${i}-inner-content`]:{color:r},[`${i}-message`]:{position:"relative",marginBottom:f,color:r,fontSize:u,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${i}-message-icon ${o}`]:{color:m,fontSize:u,flex:"none",lineHeight:1,paddingTop:(Math.round(u*C)-u)/2},"&-title":{flex:"auto",marginInlineStart:f},"&-title-only":{fontWeight:g}},[`${i}-description`]:{position:"relative",marginInlineStart:u+f,marginBottom:f,color:r,fontSize:u},[`${i}-buttons`]:{textAlign:"end",button:{marginInlineStart:f}}}}},_e=ee("Popconfirm",e=>Oe(e),e=>{const{zIndexPopupBase:i}=e;return{zIndexPopup:i+60}});var Te=function(e,i){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)i.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(o[t[r]]=e[t[r]]);return o};const Be=()=>p(p({},ve()),{prefixCls:String,content:P(),title:P(),description:P(),okType:me("primary"),disabled:{type:Boolean,default:!1},okText:P(),cancelText:P(),icon:P(),okButtonProps:D(),cancelButtonProps:D(),showCancel:{type:Boolean,default:!0},onConfirm:Function,onCancel:Function}),ke=q({compatConfig:{MODE:3},name:"APopconfirm",inheritAttrs:!1,props:ne(Be(),p(p({},te()),{trigger:"click",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0,okType:"primary",disabled:!1})),slots:Object,setup(e,i){let{slots:o,emit:t,expose:r,attrs:m}=i;const f=oe();ae(e.visible===void 0),r({getPopupDomNode:()=>{var n,a;return(a=(n=f.value)===null||n===void 0?void 0:n.getPopupDomNode)===null||a===void 0?void 0:a.call(n)}});const[u,g]=Pe(!1,{value:le(e,"open")}),C=(n,a)=>{e.open===void 0&&g(n),t("update:open",n),t("openChange",n,a)},B=n=>{C(!1,n)},l=n=>{var a;return(a=e.onConfirm)===null||a===void 0?void 0:a.call(e,n)},s=n=>{var a;C(!1,n),(a=e.onCancel)===null||a===void 0||a.call(e,n)},c=n=>{n.keyCode===ye.ESC&&u&&C(!1,n)},y=n=>{const{disabled:a}=e;a||C(n)},{prefixCls:v,getPrefixCls:I}=se("popconfirm",e),L=F(()=>I()),W=F(()=>I("btn")),[K]=_e(v),[$]=ie("Popconfirm",ge.Popconfirm),U=()=>{var n,a,b,h,O;const{okButtonProps:_,cancelButtonProps:k,title:S=(n=o.title)===null||n===void 0?void 0:n.call(o),description:N=(a=o.description)===null||a===void 0?void 0:a.call(o),cancelText:G=(b=o.cancel)===null||b===void 0?void 0:b.call(o),okText:X=(h=o.okText)===null||h===void 0?void 0:h.call(o),okType:j,icon:z=((O=o.icon)===null||O===void 0?void 0:O.call(o))||d(Ce,null,null),showCancel:J=!0}=e,{cancelButton:R,okButton:A}=o,E=p({onClick:s,size:"small"},k),Q=p(p(p({onClick:l},w(j)),{size:"small"}),_);return d("div",{class:`${v.value}-inner-content`},[d("div",{class:`${v.value}-message`},[z&&d("span",{class:`${v.value}-message-icon`},[z]),d("div",{class:[`${v.value}-message-title`,{[`${v.value}-message-title-only`]:!!N}]},[S])]),N&&d("div",{class:`${v.value}-description`},[N]),d("div",{class:`${v.value}-buttons`},[J?R?R(E):d(H,E,{default:()=>[G||$.value.cancelText]}):null,A?A(Q):d(he,{buttonProps:p(p({size:"small"},w(j)),_),actionFn:l,close:B,prefixCls:W.value,quitOnNullishReturnValue:!0,emitEvent:!0},{default:()=>[X||$.value.okText]})])])};return()=>{var n;const{placement:a,overlayClassName:b,trigger:h="click"}=e,O=Te(e,["placement","overlayClassName","trigger"]),_=re(O,["title","content","cancelText","okText","onUpdate:open","onConfirm","onCancel","prefixCls"]),k=ce(v.value,b);return K(d(de,x(x(x({},_),m),{},{trigger:h,placement:a,onOpenChange:y,open:u.value,overlayClassName:k,transitionName:fe(L.value,"zoom-big",e.transitionName),ref:f,"data-popover-inject":!0}),{default:()=>[ue(((n=o.default)===null||n===void 0?void 0:n.call(o))||[],{onKeydown:S=>{c(S)}},!1)],content:U}))}}}),we=pe(ke);export{we as _};
